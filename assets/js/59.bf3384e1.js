(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{394:function(e,t,a){"use strict";a.r(t);var s=a(25),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"install-chevereto-on-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-chevereto-on-docker"}},[e._v("#")]),e._v(" Install Chevereto on Docker")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Installation service available")]),e._v(" "),t("p",[e._v("We offer a "),t("a",{attrs:{href:"https://chevereto.com/support",target:"_blank",rel:"noopener noreferrer"}},[e._v("paid installation service"),t("OutboundLink")],1),e._v(" for this guide. We will install Chevereto Docker for you, including all the requirements and configurations.")])]),e._v(" "),t("p",[e._v("Roll your own multi-website Chevereto infrastructure with Chevereto Docker, a Docker-based system that allows you to deploy and maintain one or multiple Chevereto websites on demand.")]),e._v(" "),t("p",[e._v("By the end of this tutorial, you'll have your own Chevereto Docker up and running, capable of deploying and maintaining multiple Chevereto websites on demand, all with automatic sub-domain creation and renewable HTTPS certificates.")]),e._v(" "),t("h2",{attrs:{id:"advantages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#advantages"}},[e._v("#")]),e._v(" Advantages")]),e._v(" "),t("p",[e._v("There are several advantages of our Docker system:")]),e._v(" "),t("ul",[t("li",[e._v("Run multiple websites with ease")]),e._v(" "),t("li",[e._v("Portability")]),e._v(" "),t("li",[e._v("Easy to update")]),e._v(" "),t("li",[e._v("Automatic HTTPS setup")]),e._v(" "),t("li",[e._v("CloudFlare integration")])]),e._v(" "),t("h2",{attrs:{id:"repository"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#repository"}},[e._v("#")]),e._v(" Repository")]),e._v(" "),t("p",[e._v("Check the project repository at "),t("a",{attrs:{href:"https://github.com/chevereto/docker",target:"_blank",rel:"noopener noreferrer"}},[e._v("chevereto/docker"),t("OutboundLink")],1),e._v(" for all instructions and source code.")]),e._v(" "),t("h2",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),t("p",[e._v("To follow this guide, make sure you have:")]),e._v(" "),t("ul",[t("li",[e._v("Ubuntu server with shell access and public IP address.")]),e._v(" "),t("li",[e._v("Domain managed by CloudFlare (if using integration)")]),e._v(" "),t("li",[e._v("Chevereto license (required for the paid edition)\n"),t("ul",[t("li",[t("a",{attrs:{href:"https://chevereto.com/pricing",target:"_blank",rel:"noopener noreferrer"}},[e._v("Purchase"),t("OutboundLink")],1),e._v(" new license")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://chevereto.com/panel/license",target:"_blank",rel:"noopener noreferrer"}},[e._v("Access"),t("OutboundLink")],1),e._v(" existing purchase")])])])]),e._v(" "),t("h2",{attrs:{id:"getting-a-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getting-a-server"}},[e._v("#")]),e._v(" Getting a server")]),e._v(" "),t("p",[e._v("You'll need a server where you can install Chevereto Docker For this guide we recommend an Ubuntu 24.04 server, but any Unix-like system will do.")]),e._v(" "),t("h2",{attrs:{id:"accessing-server-shell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accessing-server-shell"}},[e._v("#")]),e._v(" Accessing server shell")]),e._v(" "),t("p",[e._v("To interact with your server use a terminal emulator. Here are some terminal emulator software by operating system:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("System")]),e._v(" "),t("th",[e._v("Software")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("macOS")]),e._v(" "),t("td",[e._v("Terminal, iTerm 2")])]),e._v(" "),t("tr",[t("td",[e._v("Windows")]),e._v(" "),t("td",[e._v("Windows Terminal, Putty")])]),e._v(" "),t("tr",[t("td",[e._v("Linux")]),e._v(" "),t("td",[e._v("Gnome Terminal, Tilix, XTerm")])])])]),e._v(" "),t("p",[e._v("Access your server via "),t("a",{attrs:{href:"https://en.wikipedia.org/wiki/Secure_Shell",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSH"),t("OutboundLink")],1),e._v(" using the following command from your computer:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ssh")]),e._v(" root@"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("server ip"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("p",[e._v("Make sure to check your server provider's documentation for specific instructions on accessing the shell.")]),e._v(" "),t("h2",{attrs:{id:"installing-chevereto-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing-chevereto-docker"}},[e._v("#")]),e._v(" Installing chevereto/docker")]),e._v(" "),t("p",[e._v("Start by installing Chevereto Docker repository and its dependencies by running the following command.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" https://chevereto.com/sh/ubuntu/24.04/docker.sh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),t("h2",{attrs:{id:"setting-up-cloudflare-integration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-cloudflare-integration"}},[e._v("#")]),e._v(" Setting up CloudFlare integration")]),e._v(" "),t("p",[e._v("Skip this section if you don't need CloudFlare integration to manage domain DNS.")]),e._v(" "),t("p",[e._v("Integrate Chevereto Docker with CloudFlare to automate sub-domain creation for your websites. If you aren't using CloudFlare go to "),t("a",{attrs:{href:"https://cloudflare.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("cloudflare.com"),t("OutboundLink")],1),e._v(" to get started, it is free. Add your domain to continue with this guide.")]),e._v(" "),t("p",[e._v("To setup CloudFlare with Chevereto Docker:")]),e._v(" "),t("ul",[t("li",[e._v("Navigate to the DNS configuration for your domain on CloudFlare.")]),e._v(" "),t("li",[e._v("Create a new A record, take note as it will be your "),t("code",[e._v("CLOUDFLARE_A_NAME")]),e._v(" environment value. Use the following properties:\n"),t("ul",[t("li",[e._v("Type: A")]),e._v(" "),t("li",[e._v("Name: chevereto-factory")]),e._v(" "),t("li",[e._v("Content: {server ip}")]),e._v(" "),t("li",[e._v("Proxy status: DNS only")]),e._v(" "),t("li",[e._v("TTL: Auto")])])]),e._v(" "),t("li",[e._v("Navigate to SSL/TLS configuration and under "),t("strong",[e._v("Overview")]),e._v(" set mode to "),t("strong",[e._v("Full (strict)")]),e._v(".")])]),e._v(" "),t("p",[e._v("Next create an API token, take note as it will be your "),t("code",[e._v("CLOUDFLARE_TOKEN")]),e._v(" environment value.")]),e._v(" "),t("ul",[t("li",[e._v("Go to "),t("a",{attrs:{href:"https://dash.cloudflare.com/profile/api-tokens",target:"_blank",rel:"noopener noreferrer"}},[e._v("api-tokens"),t("OutboundLink")],1),e._v(" and click on "),t("strong",[e._v("Create Token")])]),e._v(" "),t("li",[e._v("Use template "),t("strong",[e._v("Edit zone DNS")])]),e._v(" "),t("li",[e._v("Permissions: "),t("strong",[e._v("Zone DNS Edit")])]),e._v(" "),t("li",[e._v("Resources: "),t("strong",[e._v("Include Specific zone DOMAIN")])])]),e._v(" "),t("p",[e._v("You will require to take note on "),t("code",[e._v("CLOUDFLARE_ZONE_ID")]),e._v(" and "),t("code",[e._v("CLOUDFLARE_ACCOUNT_ID")]),e._v(" which you can get from the "),t("strong",[e._v("domain overview")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"create-configuration-env-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-configuration-env-file"}},[e._v("#")]),e._v(" Create configuration (.env file)")]),e._v(" "),t("p",[e._v("To create the configuration file run the following command and follow the on-screen instructions.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("env")]),e._v("\n")])])]),t("ul",[t("li",[t("code",[e._v("CHEVERETO_LICENSE_KEY")]),e._v(": Your Chevereto license key (required for the paid edition, leave empty for free edition).")]),e._v(" "),t("li",[t("code",[e._v("DOMAIN")]),e._v(": The FQDN you'll use for spawning Chevereto installations.")]),e._v(" "),t("li",[t("code",[e._v("EMAIL_HTTPS")]),e._v(": The email to receive HTTPS certificate notifications from Letâ€™s Encrypt.")]),e._v(" "),t("li",[t("code",[e._v("CLOUDFLARE_*")]),e._v(" options: Integration details for CloudFlare.")])]),e._v(" "),t("h2",{attrs:{id:"setting-up-system"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-system"}},[e._v("#")]),e._v(" Setting up system")]),e._v(" "),t("p",[e._v("By setting up the system you will enable background processing and nginx ingress HTTP proxy.")]),e._v(" "),t("p",[e._v("To set up the system run the following command:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" setup\n")])])]),t("h2",{attrs:{id:"building-the-chevereto-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#building-the-chevereto-image"}},[e._v("#")]),e._v(" Building the Chevereto image")]),e._v(" "),t("p",[e._v("If you're using free edition you can skip this step, as the image is freely available on "),t("a",{attrs:{href:"https://github.com/chevereto/chevereto/pkgs/container/chevereto",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub Container Registry"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("Build the Chevereto container image for the latest release by running the following command.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" image\n")])])]),t("h2",{attrs:{id:"deploying"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploying"}},[e._v("#")]),e._v(" Deploying")]),e._v(" "),t("p",[e._v("To deploy a new website use the following command format:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" deploy "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NAMESPACE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("namespace"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ADMIN_EMAIL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("email"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("Where:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("NAMESPACE")]),e._v(": The name of the sub-domain for your website (e.g. "),t("code",[e._v("demo")]),e._v(").")]),e._v(" "),t("li",[t("code",[e._v("ADMIN_EMAIL")]),e._v(": The email address for the website admin (e.g. "),t("code",[e._v("email@mywebsite.com")]),e._v(").")]),e._v(" "),t("li",[e._v("(optional) "),t("code",[e._v("DOMAIN")]),e._v(": The domain name for the website (e.g. "),t("code",[e._v("my-domain.com")]),e._v(").")])]),e._v(" "),t("p",[e._v("To spawn "),t("code",[e._v("demo.my-domain.com")]),e._v(":")]),e._v(" "),t("p",[e._v("The system will use the NAMESPACE as the sub-domain for the website.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" deploy "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NAMESPACE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("demo "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ADMIN_EMAIL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("email@mywebsite.com\n")])])]),t("p",[e._v("To spawn "),t("code",[e._v("my-top-level-domain.com")]),e._v(":")]),e._v(" "),t("p",[e._v("The system will use the domain indicated in the "),t("code",[e._v("DOMAIN")]),e._v(" variable.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" deploy "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NAMESPACE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("demo "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ADMIN_EMAIL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("email@mywebsite.com "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DOMAIN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("my-top-level-domain.com\n")])])]),t("p",[e._v("The Chevereto website will be available within seconds as the new domain propagates.")]),e._v(" "),t("h2",{attrs:{id:"upgrading"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#upgrading"}},[e._v("#")]),e._v(" Upgrading")]),e._v(" "),t("p",[e._v("To upgrade you need to (1) Sync repository, (2) Re-build the container image, and (3) Update Chevereto instances.")]),e._v(" "),t("h3",{attrs:{id:"step-1-sync-repository"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-1-sync-repository"}},[e._v("#")]),e._v(" Step 1: Sync repository")]),e._v(" "),t("p",[e._v("Sync this repository to get the latest changes.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v("\n")])])]),t("p",[t("strong",[e._v("Note:")]),e._v(" If there's a new branch (for example 4.3) switch to that branch running the following command:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" switch "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4.3")]),e._v("\n")])])]),t("h3",{attrs:{id:"step-2-re-build-the-container-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-re-build-the-container-image"}},[e._v("#")]),e._v(" Step 2: Re-build the container image")]),e._v(" "),t("p",[e._v("Build a new container image to reflect the newest release.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" image\n")])])]),t("h3",{attrs:{id:"step-3-update-chevereto-instances"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-3-update-chevereto-instances"}},[e._v("#")]),e._v(" Step 3: Update Chevereto instances")]),e._v(" "),t("p",[e._v("This will down and re-up the containers and carry the required database update.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" update\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);