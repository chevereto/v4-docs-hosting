(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{369:function(a,t,e){"use strict";e.r(t);var n=e(25),s=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"multitenancy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multitenancy"}},[a._v("#")]),a._v(" Multitenancy")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://en.wikipedia.org/wiki/Multitenancy",target:"_blank",rel:"noopener noreferrer"}},[a._v("Multitenancy"),t("OutboundLink")],1),a._v(" is supported as of version 4.4.0.")]),a._v(" "),t("p",[a._v("It allows hosting multiple isolated Chevereto instances (tenants) in a single installation. Each tenant has its own configuration, users, media, and settings, while sharing the same application codebase. This reduces maintenance and resource consumption.")]),a._v(" "),t("h2",{attrs:{id:"system-overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#system-overview"}},[a._v("#")]),a._v(" System overview")]),a._v(" "),t("p",[a._v("In a multi-tenant setup, Chevereto recognizes and serves multiple tenants. Each tenant:")]),a._v(" "),t("ul",[t("li",[a._v("Is identified by a unique tenant ID.")]),a._v(" "),t("li",[a._v("Is bound to a hostname.")]),a._v(" "),t("li",[a._v("Is resolved at runtime from the incoming request’s hostname.")])]),a._v(" "),t("p",[a._v("Tenant metadata is stored in the "),t("code",[a._v("tenants")]),a._v(" and "),t("code",[a._v("tenants_plans")]),a._v(" database tables. The database is the source of truth for tenant limits and environment settings. The application caches this data in memory and provides a "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#tenants-cli"}},[a._v("command line interface")]),a._v(" to manage it.")],1),a._v(" "),t("p",[a._v("Data stored under "),t("code",[a._v("env")]),a._v(" columns is encrypted.")]),a._v(" "),t("p",[a._v("Resource sharing and isolation:")]),a._v(" "),t("ul",[t("li",[a._v("Database: table prefixing per tenant.")]),a._v(" "),t("li",[a._v("Cache: key prefixing per tenant.")]),a._v(" "),t("li",[a._v("Storage: tenants configure their own “Site storage” and “Upload storage” in application settings.")]),a._v(" "),t("li",[a._v("Sessions: only Redis is supported as the backend.")]),a._v(" "),t("li",[a._v("Tenant ID: unique, up to 16 characters.")]),a._v(" "),t("li",[a._v("Tenant hostname: unique, up to 255 characters.")])]),a._v(" "),t("p",[a._v("Once a hostname is resolved to a tenant, the application behaves as if it were a standalone Chevereto instance with its own configuration.")]),a._v(" "),t("h2",{attrs:{id:"enabling-multitenancy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enabling-multitenancy"}},[a._v("#")]),a._v(" Enabling multitenancy")]),a._v(" "),t("p",[a._v("To enable tenants, set the following environment variables. You must provide an "),t("RouterLink",{attrs:{to:"/application/reference/encryption.html#key"}},[a._v("encryption key")]),a._v(" for securing tenant environment data.")],1),a._v(" "),t("div",{staticClass:"language-plain extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plain"}},[t("code",[a._v("CHEVERETO_ENABLE_TENANTS=1\nCHEVERETO_ENCRYPTION_KEY=your_encryption_key\nCHEVERETO_PROVIDER_NAME=your_provider_name\nCHEVERETO_PROVIDER_URL=your_provider_url\nCHEVERETO_TENANTS_API_REQUEST_SECRET=your_request_secret\n")])])]),t("ul",[t("li",[t("code",[a._v("CHEVERETO_TENANTS_API_REQUEST_SECRET")]),a._v(" is used to sign and verify requests to the "),t("RouterLink",{attrs:{to:"/api/4/tenants.html"}},[a._v("Tenants API")]),a._v(". When configured, all API requests must include a valid signature.")],1)]),a._v(" "),t("h3",{attrs:{id:"saas-context"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#saas-context"}},[a._v("#")]),a._v(" SaaS context")]),a._v(" "),t("p",[a._v("The Chevereto SaaS context is a special mode for service providers offering Chevereto as a service to multiple customers. When running Chevereto in a SaaS context, the system alters functionality and display that otherwise would allow tenants to interfere with each other or the host system. In particular, it affects the following features:")]),a._v(" "),t("ul",[t("li",[a._v("Self-upgrade capabilities")]),a._v(" "),t("li",[a._v("HTTP cron trigger")]),a._v(" "),t("li",[a._v("License key management")]),a._v(" "),t("li",[a._v("System information display (database version, PHP info, FFmpeg, etc.)")])]),a._v(" "),t("p",[a._v("To run Chevereto in a SaaS context set:")]),a._v(" "),t("div",{staticClass:"language-plain extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plain"}},[t("code",[a._v("CHEVERETO_CONTEXT=saas\n")])])]),t("h3",{attrs:{id:"environment-variables"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#environment-variables"}},[a._v("#")]),a._v(" Environment variables")]),a._v(" "),t("p",[a._v("Define resource limits and environment variables per tenant via plans and tenant configurations. To enforce overrides at runtime for all tenants, set "),t("code",[a._v("CHEVERETO_TENANT_ENFORCED")]),a._v(" to a JSON object.")]),a._v(" "),t("p",[a._v("Precedence (highest to lowest):")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("CHEVERETO_TENANT_ENFORCED")]),a._v(" (runtime enforced, not stored)")]),a._v(" "),t("li",[a._v("Tenant "),t("code",[a._v("env")]),a._v(" (encrypted at rest), "),t("code",[a._v("limits")])]),a._v(" "),t("li",[a._v("Plan "),t("code",[a._v("env")]),a._v(" (encrypted at rest), "),t("code",[a._v("limits")])]),a._v(" "),t("li",[a._v("Global defaults/environment")])]),a._v(" "),t("div",{staticClass:"language-plain extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plain"}},[t("code",[a._v('CHEVERETO_TENANT_ENFORCED=\'{"CHEVERETO_MAX_UPLOAD_SIZE":"20M"}\'\n')])])]),t("p",[t("strong",[a._v("Tip:")]),a._v(" When using yaml you can define "),t("code",[a._v("CHEVERETO_TENANT_ENFORCED")]),a._v(" multi-line as:")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("CHEVERETO_TENANT_ENFORCED")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[a._v('\n  {\n      "CHEVERETO_CONTEXT":"saas",\n      "CHEVERETO_ENABLE_BULK_IMPORTER":"0",\n      "CHEVERETO_ENABLE_CDN":"0",\n      "CHEVERETO_ENABLE_DEBUG":"0",\n      "CHEVERETO_ENABLE_LOCAL_STORAGE":"0",\n      "CHEVERETO_ENABLE_NEWS_CHECK":"1",\n      "CHEVERETO_ENABLE_PHP_PAGES":"0",\n      "CHEVERETO_ENABLE_POWERED_BY_SETTING":"1",\n      "CHEVERETO_ENABLE_FORCE_POWERED_BY_FOOTER":"0",\n      "CHEVERETO_ENABLE_PUP_CUSTOM_URL":"0",\n      "CHEVERETO_ENABLE_UPDATE_CHECK":"0",\n      "CHEVERETO_ENABLE_UPDATE_HTTP":"0",\n      "CHEVERETO_ENABLE_UPLOAD_URL":"0",\n      "CHEVERETO_ENABLE_SERVICE_MODERATECONTENT":"0",\n      "CHEVERETO_MAX_LISTING_ITEMS_PER_PAGE":"48",\n      "CHEVERETO_MAX_CACHE_TTL":"3600",\n      "CHEVERETO_MIN_STORAGES_ACTIVE":"1"\n  }')]),a._v("\n")])])]),t("h3",{attrs:{id:"initializing-the-multi-tenant-system"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#initializing-the-multi-tenant-system"}},[a._v("#")]),a._v(" Initializing the multi-tenant system")]),a._v(" "),t("p",[a._v("Initialize the multi-tenant database (run once after enabling multitenancy):")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" init\n")])])]),t("h2",{attrs:{id:"tenants-api-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tenants-api-keys"}},[a._v("#")]),a._v(" Tenants API keys")]),a._v(" "),t("h3",{attrs:{id:"creating-tenants-api-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-tenants-api-keys"}},[a._v("#")]),a._v(" Creating Tenants API keys")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#create-tenants-api-key"}},[a._v("api:key:create")]),a._v(" to create API keys for accessing the Tenants API.")],1),a._v(" "),t("p",[a._v("API keys for Tenants API have the format "),t("code",[a._v("chv_1_*")]),a._v(", where "),t("code",[a._v("1")]),a._v(" is the integer, sequential generated, API key id.")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" api:key:create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"My Key"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--expires")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2025-12-31 23:59:59"')]),a._v("\n")])])]),t("h3",{attrs:{id:"verifying-tenants-api-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verifying-tenants-api-keys"}},[a._v("#")]),a._v(" Verifying Tenants API keys")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#verify-tenants-api-key"}},[a._v("api:key:verify")]),a._v(" to verify an API key by its key value.")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" api:key:verify "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--key")]),a._v(" chv_1_1234567890\n")])])]),t("h3",{attrs:{id:"deleting-tenants-api-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deleting-tenants-api-keys"}},[a._v("#")]),a._v(" Deleting Tenants API keys")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#delete-tenants-api-key"}},[a._v("api:key:delete")]),a._v(" to delete an API key by id and/or name.")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" api:key:delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\napp/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" api:key:delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"My Key"')]),a._v("\n")])])]),t("h2",{attrs:{id:"hardening-the-tenants-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hardening-the-tenants-api"}},[a._v("#")]),a._v(" Hardening the Tenants API")]),a._v(" "),t("p",[a._v("Access to the "),t("RouterLink",{attrs:{to:"/api/4/tenants.html"}},[a._v("Tenants API")]),a._v(" can be restricted by IP address or network range using "),t("code",[a._v("CHEVERETO_TENANTS_API_ALLOW_LIST")]),a._v(".")],1),a._v(" "),t("p",[a._v("All API keys are cryptographically signed with "),t("code",[a._v("CHEVERETO_TENANTS_API_KEY_SECRET")]),a._v(". Only keys generated through the "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#create-tenants-api-key"}},[a._v("Tenants CLI")]),a._v(" contain valid signatures and will be accepted by the API.")],1),a._v(" "),t("div",{staticClass:"language-plain extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plain"}},[t("code",[a._v('CHEVERETO_TENANTS_API_ALLOW_LIST="200.200.200.200,10.0.0.0/24,203.0.113.0/28"\nCHEVERETO_TENANTS_API_KEY_SECRET=your_tenants_api_signing_secret\n')])])]),t("h2",{attrs:{id:"managing-tenant-plans"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#managing-tenant-plans"}},[a._v("#")]),a._v(" Managing tenant plans")]),a._v(" "),t("p",[a._v("Tenant plans define default limits and environment variables, similar to a template. When a tenant is assigned to a plan, it inherits the plan’s limits and environment, which the tenant can still override.")]),a._v(" "),t("ul",[t("li",[a._v("Use "),t("code",[a._v("limits")]),a._v(" to define resource constraints.")]),a._v(" "),t("li",[a._v("Use "),t("code",[a._v("env")]),a._v(" to set environment variables (values are stored encrypted).")])]),a._v(" "),t("h3",{attrs:{id:"creating-a-tenant-plan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-tenant-plan"}},[a._v("#")]),a._v(" Creating a tenant plan")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#create-tenant-plan"}},[a._v("plan:create")]),a._v(". Pass the plan "),t("code",[a._v("id")]),a._v(", "),t("code",[a._v("limits")]),a._v(" and "),t("code",[a._v("env")]),a._v(" are optional (JSON format).")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" plan:create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" my-plan "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--limits")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"CHEVERETO_MAX_TAGS":"10000"}\'')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"CHEVERETO_CACHE_TIME_MICRO":"120"}\'')]),a._v("\n")])])]),t("p",[a._v("This creates plan "),t("code",[a._v("my-plan")]),a._v(" with a maximum of "),t("code",[a._v("10000")]),a._v(" tags and a cache time of "),t("code",[a._v("120")]),a._v(" seconds.")]),a._v(" "),t("h3",{attrs:{id:"editing-a-tenant-plan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#editing-a-tenant-plan"}},[a._v("#")]),a._v(" Editing a tenant plan")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#edit-tenant-plan"}},[a._v("plan:edit")]),a._v(" to change the name, limits, or environment of an existing plan. Affected tenants will inherit the updated plan settings; the settings are re-cached automatically.")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" plan:edit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" my-plan "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--limits")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"CHEVERETO_MAX_TAGS":"15000"}\'')]),a._v("\n")])])]),t("h3",{attrs:{id:"listing-tenant-plans"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#listing-tenant-plans"}},[a._v("#")]),a._v(" Listing tenant plans")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#list-tenant-plans"}},[a._v("plan:list")]),a._v(":")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" plan:list\n")])])]),t("h3",{attrs:{id:"deleting-a-tenant-plan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deleting-a-tenant-plan"}},[a._v("#")]),a._v(" Deleting a tenant plan")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#delete-tenant-plan"}},[a._v("plan:delete")]),a._v(" by plan ID. Affected tenants will lose the inherited plan settings; the settings are re-cached automatically.")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" plan:delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" my-plan\n")])])]),t("h2",{attrs:{id:"managing-tenants"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#managing-tenants"}},[a._v("#")]),a._v(" Managing tenants")]),a._v(" "),t("p",[a._v("A tenant represents an individual Chevereto instance within the multi-tenant setup. Each tenant has a unique hostname and can override its plan’s limits and environment.")]),a._v(" "),t("ul",[t("li",[a._v("Use "),t("code",[a._v("limits")]),a._v(" for resource constraints.")]),a._v(" "),t("li",[a._v("Use "),t("code",[a._v("env")]),a._v(" for environment variables (encrypted). Tenant "),t("code",[a._v("env")]),a._v(" overrides plan "),t("code",[a._v("env")]),a._v(".")])]),a._v(" "),t("h3",{attrs:{id:"creating-a-tenant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-tenant"}},[a._v("#")]),a._v(" Creating a tenant")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#create-tenant"}},[a._v("create")]),a._v(". Provide tenant ID, hostname, and enabled status. "),t("code",[a._v("plan_id")]),a._v(", "),t("code",[a._v("limits")]),a._v(", and "),t("code",[a._v("env")]),a._v(" are optional (JSON format).")],1),a._v(" "),t("p",[t("strong",[a._v("Note:")]),a._v(" It is "),t("strong",[a._v("recommended")]),a._v(" to set a unique "),t("code",[a._v("CHEVERETO_ENCRYPTION_KEY")]),a._v(" per tenant for enhanced security.")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" tenant1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" example.com "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--is_enabled")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--plan_id")]),a._v(" my-plan "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"CHEVERETO_ENCRYPTION_KEY":"base64 encoded (size 32)"}\'')]),a._v("\n")])])]),t("p",[a._v("Command above creates tenant "),t("code",[a._v("tenant1")]),a._v(" associated with the hostname "),t("code",[a._v("example.com")]),a._v(", enabled, with plan "),t("code",[a._v("my-plan")]),a._v(".")]),a._v(" "),t("h3",{attrs:{id:"listing-tenants"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#listing-tenants"}},[a._v("#")]),a._v(" Listing tenants")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#list-tenants"}},[a._v("list")]),a._v(":")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" list\n")])])]),t("h3",{attrs:{id:"installing-chevereto"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing-chevereto"}},[a._v("#")]),a._v(" Installing Chevereto")]),a._v(" "),t("p",[a._v("After creating a tenant, the application requires to "),t("RouterLink",{attrs:{to:"/application/installing/installation.html#setup"}},[a._v("setup")]),a._v(", which can be made via CLI or HTTP.")],1),a._v(" "),t("ul",[t("li",[a._v("For "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#install"}},[a._v("CLI Install")]),a._v(" pass the "),t("code",[a._v("CHEVERETO_TENANT")]),a._v(" environment variable:")],1)]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CHEVERETO_TENANT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tenant1 app/bin/cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("options"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ul",[t("li",[a._v("For Web install, access the tenant hostname in a web browser and follow the setup instructions.")])]),a._v(" "),t("h3",{attrs:{id:"editing-a-tenant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#editing-a-tenant"}},[a._v("#")]),a._v(" Editing a tenant")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#edit-tenant"}},[a._v("edit")]),a._v(" to change hostname, enabled status, plan, limits, or environment.")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" edit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--is_enabled")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),t("h3",{attrs:{id:"deleting-a-tenant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deleting-a-tenant"}},[a._v("#")]),a._v(" Deleting a tenant")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#delete-tenant"}},[a._v("delete")]),a._v(" by tenant ID:")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\napp/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" --drop-tables\n")])])]),t("p",[a._v("When passing "),t("code",[a._v("--drop-tables")]),a._v(", the tenant’s database tables are also removed.")]),a._v(" "),t("h3",{attrs:{id:"caching-tenant-data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#caching-tenant-data"}},[a._v("#")]),a._v(" Caching tenant data")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#cache-tenants-data"}},[a._v("cache")]),a._v(" to regenerate the entire tenant data cache:")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" cache\n")])])]),t("h2",{attrs:{id:"tenants-stats-refresh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tenants-stats-refresh"}},[a._v("#")]),a._v(" Tenants stats refresh")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#tenants-stats-refresh"}},[a._v("stats:refresh")]),a._v(" to recalculate and update the tenants stats table.")],1),a._v(" "),t("p",[a._v("To refresh stats for all tenants:")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" stats:refresh\n")])])]),t("p",[a._v("To refresh stats for a specific tenant:")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" stats:refresh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("h2",{attrs:{id:"running-jobs-worker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-jobs-worker"}},[a._v("#")]),a._v(" Running jobs worker")]),a._v(" "),t("p",[a._v("Use "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#tenants-jobs-worker"}},[a._v("jobs:worker")]),a._v(" to run the jobs worker in multi-tenant mode. This long-running process handles background tasks for all tenant websites and periodically refreshes the tenants stats table.")],1),a._v(" "),t("p",[a._v("Adjust the job polling interval per tenant by setting "),t("code",[a._v("CHEVERETO_JOBS_WORKER_INTERVAL")]),a._v(" (in seconds) globally, in a plan, or for individual tenants.")]),a._v(" "),t("p",[a._v("To run the worker for all tenants:")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" jobs:worker\n")])])]),t("p",[a._v("To run the worker for a specific tenant:")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" jobs:worker "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("You can also run each tenant job by passing the tenant ID to the "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#cron"}},[a._v("CRON command")]),a._v(":")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CHEVERETO_TENANT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" app/bin/cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cron")]),a._v("\n")])])]),t("h2",{attrs:{id:"updating-tenants"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-tenants"}},[a._v("#")]),a._v(" Updating tenants")]),a._v(" "),t("p",[a._v("When updating Chevereto, run the "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#tenants-database-migrate"}},[a._v("database:migrate")]),a._v(" command to apply database migrations.")],1),a._v(" "),t("p",[a._v("To apply updates to all tenants:")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" database:migrate\n")])])]),t("p",[a._v("To update a specific tenant:")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("app/bin/tenants "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" database:migrate "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("You can also update each tenant by passing the tenant ID to the "),t("RouterLink",{attrs:{to:"/application/reference/cli.html#database-migrate"}},[a._v("database-migrate command")]),a._v(":")],1),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CHEVERETO_TENANT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" app/bin/cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" database-migrate\n")])])]),t("h2",{attrs:{id:"application-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#application-cli"}},[a._v("#")]),a._v(" Application CLI")]),a._v(" "),t("p",[a._v("Access the application CLI of each tenant by passing the target tenant via the "),t("code",[a._v("CHEVERETO_TENANT")]),a._v(" environment variable.")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CHEVERETO_TENANT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("abc app/bin/cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("options"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);