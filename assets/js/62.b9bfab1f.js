(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{402:function(t,e,a){"use strict";a.r(e);var s=a(25),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"install-chevereto-on-vps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-chevereto-on-vps"}},[t._v("#")]),t._v(" Install Chevereto on VPS")]),t._v(" "),e("p",[t._v("Collection of bash scripts to install Chevereto in any VPS (Virtual Private Server).")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Installation service available")]),t._v(" "),e("p",[t._v("We offer a "),e("a",{attrs:{href:"https://chevereto.com/support",target:"_blank",rel:"noopener noreferrer"}},[t._v("paid installation service"),e("OutboundLink")],1),t._v(" for this guide. We will install Chevereto VPS for you, including all the requirements and configurations.")])]),t._v(" "),e("h2",{attrs:{id:"repository"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#repository"}},[t._v("#")]),t._v(" Repository")]),t._v(" "),e("p",[t._v("We have a GitHub repository with all the commands we will need. Check the repository at "),e("a",{attrs:{href:"https://github.com/chevereto/vps",target:"_blank",rel:"noopener noreferrer"}},[t._v("chevereto/vps"),e("OutboundLink")],1),t._v(" for instructions.")]),t._v(" "),e("h2",{attrs:{id:"stack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stack"}},[t._v("#")]),t._v(" Stack")]),t._v(" "),e("ul",[e("li",[t._v("PHP")]),t._v(" "),e("li",[t._v("Apache HTTP Web server")]),t._v(" "),e("li",[t._v("MySQL Server")]),t._v(" "),e("li",[t._v("Composer")]),t._v(" "),e("li",[t._v("FFmpeg")]),t._v(" "),e("li",[t._v("Certbot")]),t._v(" "),e("li",[t._v("ExifTool")]),t._v(" "),e("li",[t._v("exiftran")])]),t._v(" "),e("h2",{attrs:{id:"instructions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#instructions"}},[t._v("#")]),t._v(" Instructions")]),t._v(" "),e("ul",[e("li",[t._v("Root login to your VPS")]),t._v(" "),e("li",[t._v("Run the following script(s)")])]),t._v(" "),e("h2",{attrs:{id:"ubuntu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu"}},[t._v("#")]),t._v(" Ubuntu")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("Note")]),t._v(": Ubuntu LTS 24.04 is recommended. If you run other system you may need to alter the scripts. Feel free to contribute.")])]),t._v(" "),e("h3",{attrs:{id:"prepare"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prepare"}},[t._v("#")]),t._v(" Prepare")]),t._v(" "),e("p",[t._v("The "),e("a",{attrs:{href:"https://github.com/chevereto/vps/blob/4.3/ubuntu/24.04/prepare.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("prepare.sh"),e("OutboundLink")],1),t._v(" script install the system stack on Ubuntu.")]),t._v(" "),e("p",[t._v("Reboot the VPS to make sure to apply any pending kernel updates:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("systemctl "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reboot")]),t._v("\n")])])]),e("p",[t._v("Make sure to change "),e("code",[t._v("24.04")]),t._v(" to match your Ubuntu LTS (available 20.04, 22.04 and 24.04).")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://raw.githubusercontent.com/chevereto/vps/4.3/ubuntu/24.04/prepare.sh"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("This message will be shown on success:")]),t._v(" "),e("div",{staticClass:"language-plain extra-class"},[e("pre",{pre:!0,attrs:{class:"language-plain"}},[e("code",[t._v("[OK] Stack ready for Chevereto!\n")])])]),e("h2",{attrs:{id:"common"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#common"}},[t._v("#")]),t._v(" Common")]),t._v(" "),e("ul",[e("li",[t._v("The scripts at "),e("code",[t._v("common/")]),t._v(" will work under any unix-like system")]),t._v(" "),e("li",[t._v("Requires "),e("code",[t._v("curl")]),t._v(" and "),e("code",[t._v("unzip")])])]),t._v(" "),e("h3",{attrs:{id:"new"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#new"}},[t._v("#")]),t._v(" New")]),t._v(" "),e("p",[t._v("The "),e("a",{attrs:{href:"https://github.com/chevereto/vps/blob/4.3/common/new.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("new.sh"),e("OutboundLink")],1),t._v(" script downloads Chevereto and configures Apache HTTP Web server, MySQL, CRON and FFmpeg. Its purpose is to prepare for "),e("a",{attrs:{href:"https://v4-docs.chevereto.com/application/installing/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chevereto Installation"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("This is intended to brand new installations and it should run after "),e("a",{attrs:{href:"#prepare"}},[t._v("prepare")]),t._v(" as it assumes that the system stack is ready.")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://raw.githubusercontent.com/chevereto/vps/4.3/common/new.sh"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h4",{attrs:{id:"notes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[t._v("#")]),t._v(" Notes")]),t._v(" "),e("p",[t._v("On the server:")]),t._v(" "),e("ul",[e("li",[t._v("The web root is located at "),e("code",[t._v("/var/www/html")])]),t._v(" "),e("li",[t._v("The MySQL root password is saved at "),e("code",[t._v("/root/.mysql_password")])]),t._v(" "),e("li",[t._v("Logs are at "),e("code",[t._v("/var/log/apache2")])])]),t._v(" "),e("p",[t._v("IMPORTANT:")]),t._v(" "),e("ul",[e("li",[t._v("Secure your database by running "),e("code",[t._v("mysql_secure_installation")])])]),t._v(" "),e("h3",{attrs:{id:"get"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get"}},[t._v("#")]),t._v(" Get")]),t._v(" "),e("p",[t._v("The "),e("a",{attrs:{href:"https://github.com/chevereto/vps/blob/4.3/common/get.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("get.sh"),e("OutboundLink")],1),t._v(" script download and extracts Chevereto in the "),e("strong",[t._v("current working folder")]),t._v(".")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("cd")]),t._v(" into the website project folder (for example "),e("code",[t._v("/var/www/html")]),t._v(")")]),t._v(" "),e("li",[t._v("Run the following command")])]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://raw.githubusercontent.com/chevereto/vps/4.3/common/get.sh"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"cloudflare-remote-ip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cloudflare-remote-ip"}},[t._v("#")]),t._v(" Cloudflare remote IP")]),t._v(" "),e("p",[t._v("The "),e("a",{attrs:{href:"https://github.com/chevereto/vps/blob/4.3/common/cf-remoteip.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("cf-remoteip.sh"),e("OutboundLink")],1),t._v(" script syncs the known IPs for CloudFlare remote IP. This "),e("strong",[t._v("must")]),t._v(" be used if you are using CloudFlare.")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("Warning")]),t._v(": If you use CloudFlare and not complete this setup your Chevereto installation won't be able to retrieve real visitors IP.")])]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://raw.githubusercontent.com/chevereto/vps/4.3/common/cf-remoteip.sh"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("ul",[e("li",[t._v("To save the above script in your VPS:")])]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-SOJL")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --output-dir /etc/apache2 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    https://raw.githubusercontent.com/chevereto/vps/4.3/common/cf-remoteip.sh\n")])])]),e("ul",[e("li",[t._v("To add the above script to CRON (cron.d) to keep these IP ranges auto updated:")])]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/etc/cron.d/cf-remoteip "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOM\n30 3 * * * /etc/apache2/cf-remoteip.sh >/dev/null 2>&1\nEOM")]),t._v("\n")])])]),e("h3",{attrs:{id:"https-setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https-setup"}},[t._v("#")]),t._v(" HTTPS setup")]),t._v(" "),e("p",[t._v("Run the following command to get automatic renewable HTTPS thanks to certbot. Mind to change "),e("code",[t._v("example.com")]),t._v(" with the target domain(s).")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("certbot "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--apache")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" example.com\n")])])]),e("p",[t._v("If you are using "),e("code",[t._v("www.")]),t._v(" subdomain you can add it like this:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("certbot "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--apache")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" example.com "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" www.example.com\n")])])]),e("h3",{attrs:{id:"wipe-leftovers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wipe-leftovers"}},[t._v("#")]),t._v(" Wipe leftovers")]),t._v(" "),e("p",[t._v("The "),e("a",{attrs:{href:"https://github.com/chevereto/vps/blob/4.3/common/wipe-v3-leftovers.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("wipe-v3-leftovers.sh"),e("OutboundLink")],1),t._v(" script removes any previous Chevereto V3 installation leftovers from the current working folder.")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://raw.githubusercontent.com/chevereto/vps/4.3/common/wipe-v3-leftovers.sh"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);